<mat-toolbar>
	<mat-icon *ngIf="canNavigateUp" (click)="navigateUp()">arrow_back</mat-icon>
	<span class="left-spacer">{{currentPath || 'Filer'}}</span>
	<span class="spacer"></span>
	<mat-icon color="primary" (click)="openNewFolderDialog()">create_new_folder</mat-icon>
	<mat-icon color="primary" class="left-spacer" (click)="openNewFileDialog()">attach_file</mat-icon>
</mat-toolbar>
<mat-card>
	<div class="container" fxFlex fxLayout="row" fxLayoutAlign="space-between stretch">
		<div class="content" fxFlex fxLayout="row">
			<mat-grid-list cols="4" rowHeight="100px" fxFlex>
				<mat-grid-tile *ngFor="let element of files" class="file-or-folder">
					<span [matMenuTriggerFor]="rootMenu" [matMenuTriggerData]="{element: element}" #menuTrigger="matMenuTrigger"></span>
					<div fxLayout="column" fxLayoutAlign="space-between center" (click)="navigateToFolder(element)" (contextmenu)="openMenu($event, menuTrigger)">
						<mat-icon color="accent" class="file-or-folder-icon" *ngIf="element.folder">folder</mat-icon>
						<mat-icon color="accent" class="file-or-folder-icon" *ngIf="!element.folder">insert_drive_file</mat-icon>
						<span>{{element.name}}</span>
					</div>
				</mat-grid-tile>
			</mat-grid-list>
		</div>
	</div>
</mat-card>


<mat-menu #rootMenu="matMenu" [overlapTrigger]="false">
	<ng-template matMenuContent let-element="element">
		<!--button mat-menu-item [matMenuTriggerFor]="moveToMenu" [matMenuTriggerData]="{self: element}">
			<mat-icon>open_with</mat-icon>
			<span>Move To</span>
		</button>

		<button mat-menu-item (click)="deleteElement(element)">
			<mat-icon>delete</mat-icon>
			<span>Delete</span>
		</button-->
		<button mat-menu-item (click)="openRenameDialog(element)">
			<mat-icon>edit</mat-icon>
			<span>Rename</span>
		</button>
		<button *ngIf="!element.folder" mat-menu-item (click)="downloadElement(element)">
			<mat-icon>cloud_download</mat-icon>
			<span>Download</span>
			</button>
	</ng-template>
</mat-menu>
<!--
<mat-menu #moveToMenu="matMenu">
	<ng-template matMenuContent let-self="self">
		<ng-container *ngFor="let element of fileElements">
			<button *ngIf="element.isFolder && element.id !== self.id" mat-menu-item (click)="moveElement(self, element)">{{element.name}}</button>
		</ng-container>
	</ng-template>
</mat-menu>
-->
